<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Club Municipal de Tennis Chihia{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/static/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/static/favicon-512x512.png">
    <meta name="msapplication-TileColor" content="#2c5530">
    <meta name="theme-color" content="#2c5530">
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="CMTCH">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CMTCH">
    <meta name="description" content="Application de gestion du Club Municipal de Tennis Chihia - Réservations, articles et gestion des membres">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-config" content="/static/browserconfig.xml">
    <meta name="msapplication-TileColor" content="#2c5530">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/static/favicon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/favicon-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/static/favicon-192x192.png">
    
    <!-- Logo et favicon du Club Municipal de Tennis Chihia -->
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- CSS Critique inline pour le rendu initial -->
    <style>
        /* CSS critique minimal pour le rendu initial */
        :root{--primary-color:#1e3a8a;--accent-color:#f59e0b;--secondary-color:#fff;--text-color:#1f2937;--border-radius:.75rem}
        *{box-sizing:border-box}html{scroll-behavior:smooth}body{font-family:'Montserrat',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background-color:#f8fafc;color:#1f2937;line-height:1.6;margin:0;padding:0;font-weight:400;overflow-x:hidden}
        .navbar{background:linear-gradient(135deg,#1e3a8a 0%,#1e40af 100%)!important;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:.25rem 0;transition:all .3s ease;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
        .navbar-brand{display:flex;align-items:center;font-weight:700;font-size:1rem;color:#fff!important;text-decoration:none;transition:transform .3s ease}
        .navbar-nav{display:flex;flex-direction:row;align-items:center;margin:0;padding:0}
        .navbar-nav .nav-item{display:inline-block;margin:0 .1rem}
        .navbar-nav .nav-link{color:#fff!important;font-weight:500;padding:.25rem .5rem!important;margin:0!important;border-radius:.25rem;transition:all .3s ease;font-size:.85rem;white-space:nowrap;display:inline-block}
        .navbar-nav .nav-link:hover{background-color:rgba(255,255,255,.1);transform:translateY(-1px)}
        .navbar-brand img{height:30px!important;width:auto;margin-right:.5rem!important}
        .navbar-brand .small{font-size:.75rem!important}
        .hero{position:relative;background:linear-gradient(135deg,rgba(30,58,138,.95) 0%,rgba(30,64,175,.9) 50%,rgba(245,158,11,.8) 100%),url('/static/images/hero.png');background-size:cover;background-position:center;color:#fff;padding:140px 0;min-height:80vh;display:flex;align-items:center}
        .hero-content{position:relative;z-index:2;text-align:center;max-width:900px;margin:0 auto}
        .hero-content h1{font-size:clamp(2.5rem,6vw,4rem);font-weight:800;margin-bottom:1.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3);background:linear-gradient(135deg,#fff 0%,#fbbf24 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .hero-content p{font-size:clamp(1.125rem,2.5vw,1.5rem);margin-bottom:2.5rem;opacity:.95;font-weight:500}
        .btn{font-weight:600;border-radius:.75rem;padding:.875rem 1.75rem;transition:all .4s cubic-bezier(.4,0,.2,1);border:none;position:relative;overflow:hidden;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}
        .btn-primary{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);color:#fff;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}
        .btn-lg{padding:1.125rem 2.25rem;font-size:1.125rem;border-radius:1rem}
        section{padding:100px 0;position:relative}
        .section-title{text-align:center;font-size:clamp(2rem,4vw,3rem);font-weight:800;margin-bottom:4rem;color:#1e3a8a;position:relative;letter-spacing:-.02em}
        .card{border:none;border-radius:.75rem;overflow:hidden;transition:all .4s cubic-bezier(.4,0,.2,1);background:#fff}
        .card:hover{transform:translateY(-8px);box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}
        @media (max-width:991px){
            .navbar-nav{flex-direction:column!important;width:100%;margin:0!important;padding:0!important}
            .navbar-nav .nav-item{display:block!important;width:100%;margin:0!important}
            .navbar-nav .nav-link{width:100%!important;text-align:left!important;padding:.75rem 1rem!important;white-space:normal!important;display:block!important;margin:0!important}
            .navbar-collapse{display:none!important}
            .navbar-collapse.show{display:block!important}
            .navbar-toggler{display:block!important}
            .dropdown-menu{display:none!important}
            .dropdown-toggle::after{display:none!important}
        }
        @media (max-width:768px){.hero-content h1{font-size:clamp(2rem,8vw,3rem)}.section-title{font-size:clamp(1.75rem,6vw,2.5rem)}.hero{padding:100px 0;min-height:70vh}section{padding:80px 0}}
        @media (max-width:576px){.hero-content h1{font-size:clamp(1.75rem,10vw,2.5rem)}.hero{padding:100px 0;min-height:70vh}}
        .text-gradient{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .bg-gradient-primary{background:linear-gradient(135deg,#1e3a8a 0%,#1e40af 100%)}
        .bg-gradient-accent{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}
    </style>

    <!-- Préchargement des ressources critiques -->
    <link rel="preload" href="/static/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/static/css/style.css"></noscript>
    
    <!-- CSS personnalisé pour CMTCH -->
    <link rel="stylesheet" href="/static/css/custom.css">
    <link rel="stylesheet" href="/static/css/performance.css">
    <link rel="stylesheet" href="/static/css/rtl.css">
    

</head>
<body>
    <!-- Navigation responsive optimisée mobile -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <!-- Logo et nom du club - version mobile optimisée -->
            <a class="navbar-brand d-flex align-items-center" href="/">
                <img src="/static/images/logo.jpg" alt="Logo du Club Municipal de Tennis Chihia" height="30" class="me-2 d-none d-sm-inline">
                <div class="d-none d-sm-block">
                    <span class="d-block fw-bold small">Club Municipal</span>
                    <span class="d-block small opacity-75">de Tennis Chihia</span>
                </div>
                <div class="d-block d-sm-none">
                    <span class="fw-bold">CMTCH</span>
                </div>
            </a>
            
            <!-- Bouton toggle pour mobile - amélioré -->
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Menu de navigation - responsive -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <!-- Navigation principale -->
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="fas fa-home me-1"></i>Accueil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/articles">
                            <i class="fas fa-newspaper me-1"></i>Actualités
                        </a>
                    </li>
                    
                    {% if not user %}
                        <!-- Utilisateur non connecté -->
                        <li class="nav-item">
                            <a class="nav-link" href="/inscription">
                                <i class="fas fa-user-plus me-1"></i>Inscription
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/connexion">
                                <i class="fas fa-sign-in-alt me-1"></i>Connexion
                            </a>
                        </li>
                    {% else %}
                        <!-- Utilisateur connecté -->
                        {% if user.is_admin %}
                            <!-- Menu admin - version mobile -->
                            <li class="nav-item d-lg-none">
                                <a class="nav-link" href="/admin/membres">
                                    <i class="fas fa-users me-1"></i>Gestion des membres
                                </a>
                            </li>
                            <li class="nav-item d-lg-none">
                                <a class="nav-link" href="/admin/reservations">
                                    <i class="fas fa-calendar me-1"></i>Gestion des réservations
                                </a>
                            </li>
                            <li class="nav-item d-lg-none">
                                <a class="nav-link" href="/admin/articles">
                                    <i class="fas fa-newspaper me-1"></i>Gestion des articles
                                </a>
                            </li>
                            
                            <!-- Menu admin - version desktop -->
                            <li class="nav-item dropdown d-none d-lg-block">
                                <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-cog me-1"></i>Admin
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="adminDropdown">
                                    <li>
                                        <a class="dropdown-item" href="/admin/membres">
                                            <i class="fas fa-users me-2"></i>Gestion des membres
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/admin/reservations">
                                            <i class="fas fa-calendar me-2"></i>Gestion des réservations
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/admin/articles">
                                            <i class="fas fa-newspaper me-2"></i>Gestion des articles
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        {% endif %}
                        
                        <!-- Menu utilisateur - version mobile -->
                        {% if user.validated %}
                            <li class="nav-item d-lg-none">
                                <a class="nav-link" href="/reservations">
                                    <i class="fas fa-calendar-check me-1"></i>Réservations
                                </a>
                            </li>
                            <li class="nav-item d-lg-none">
                                <a class="nav-link" href="/espace">
                                    <i class="fas fa-user me-1"></i>Mon espace
                                </a>
                            </li>
                        {% endif %}
                        <li class="nav-item d-lg-none">
                            <a class="nav-link" href="/deconnexion">
                                <i class="fas fa-sign-out-alt me-1"></i>Déconnexion
                            </a>
                        </li>
                        
                        <!-- Menu utilisateur - version desktop -->
                        <li class="nav-item dropdown d-none d-lg-block">
                            <a class="nav-link dropdown-toggle text-light" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user me-1"></i>{{ user.username }}
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="userDropdown">
                                {% if user.validated %}
                                    <li>
                                        <a class="dropdown-item" href="/reservations">
                                            <i class="fas fa-calendar-check me-2"></i>Réservations
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/espace">
                                            <i class="fas fa-user me-2"></i>Mon espace
                                        </a>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                {% endif %}
                                <li>
                                    <a class="dropdown-item" href="/deconnexion">
                                        <i class="fas fa-sign-out-alt me-2"></i>Déconnexion
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenu principal avec padding ultra-réduit pour la navbar ultra-compacte -->
    <main style="padding-top: 45px;">
        {% block content %}{% endblock %}
    </main>

    <!-- Pied de page moderne -->
    <footer class="bg-gradient-primary text-white">
        <div class="container">
            <div class="row py-4">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-tennis-ball me-2"></i>Club Municipal de Tennis Chihia
                    </h5>
                    <p class="mb-0 opacity-75">Votre club de tennis de proximité pour pratiquer votre passion dans un cadre convivial.</p>
                </div>
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h6 class="fw-bold mb-3">Liens rapides</h6>
                    <ul class="list-unstyled">
                        <li><a href="/" class="text-white text-decoration-none opacity-75">Accueil</a></li>
                        <li><a href="/articles" class="text-white text-decoration-none opacity-75">Actualités</a></li>
                        <li><a href="/inscription" class="text-white text-decoration-none opacity-75">Inscription</a></li>
                        <li><a href="/reservations" class="text-white text-decoration-none opacity-75">Réservations</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h6 class="fw-bold mb-3">Contact</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-map-marker-alt me-2 text-accent"></i>
                            <span class="opacity-75">Chihia, Tunisie</span>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-phone me-2 text-accent"></i>
                            <span class="opacity-75">+216 XX XXX XXX</span>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-envelope me-2 text-accent"></i>
                            <span class="opacity-75">contact@tennis-chihia.tn</span>
                        </li>
                    </ul>
                </div>
            </div>
            <hr class="my-3 opacity-25">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0 opacity-75">&copy; {{ datetime.utcnow().year }} Club Municipal de Tennis Chihia. Tous droits réservés.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <div class="social-links-footer">
                        <a href="https://www.facebook.com/ClubTennischihia" target="_blank" class="social-link-footer">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-link-footer">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link-footer">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link-footer">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <!-- Script personnalisé pour les animations -->
    <script>
        // Correction du menu mobile
        document.addEventListener('DOMContentLoaded', function() {
            // Forcer l'affichage correct du menu mobile
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');
            
            if (navbarToggler && navbarCollapse) {
                // Fonction pour appliquer les styles mobiles
                function applyMobileStyles() {
                    if (window.innerWidth <= 991) {
                        const navLinks = navbarCollapse.querySelectorAll('.nav-link');
                        navLinks.forEach(link => {
                            link.style.display = 'block';
                            link.style.width = '100%';
                            link.style.textAlign = 'left';
                            link.style.whiteSpace = 'normal';
                            link.style.padding = '0.75rem 1rem';
                            link.style.margin = '0';
                        });
                        
                        const navItems = navbarCollapse.querySelectorAll('.nav-item');
                        navItems.forEach(item => {
                            item.style.display = 'block';
                            item.style.width = '100%';
                            item.style.margin = '0';
                        });
                        
                        // Masquer tous les dropdowns sur mobile
                        const dropdownMenus = navbarCollapse.querySelectorAll('.dropdown-menu');
                        dropdownMenus.forEach(menu => {
                            menu.style.display = 'none';
                            menu.classList.remove('show');
                        });
                        
                        // Désactiver les dropdowns toggles sur mobile
                        const dropdownToggles = navbarCollapse.querySelectorAll('.dropdown-toggle');
                        dropdownToggles.forEach(toggle => {
                            toggle.setAttribute('data-bs-toggle', '');
                            toggle.style.pointerEvents = 'none';
                        });
                    } else {
                        // Réactiver les dropdowns sur desktop
                        const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
                        dropdownToggles.forEach(toggle => {
                            toggle.setAttribute('data-bs-toggle', 'dropdown');
                            toggle.style.pointerEvents = 'auto';
                        });
                    }
                }
                
                // Appliquer les styles au chargement
                applyMobileStyles();
                
                // Réappliquer les styles lors du redimensionnement
                window.addEventListener('resize', applyMobileStyles);
                
                navbarToggler.addEventListener('click', function() {
                    // Attendre que Bootstrap ait fait son travail
                    setTimeout(() => {
                        if (navbarCollapse.classList.contains('show')) {
                            // Menu ouvert - s'assurer que les styles sont corrects
                            navbarCollapse.style.display = 'block';
                            applyMobileStyles();
                        } else {
                            // Menu fermé
                            navbarCollapse.style.display = 'none';
                        }
                    }, 50);
                });
            }
            
            // Animation au scroll avec Intersection Observer
            // Ajouter la classe active au lien de navigation actuel
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
            
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                }
            });
            
            // Configuration de l'Intersection Observer pour les animations au scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        
                        // Animation spéciale pour les statistiques
                        if (entry.target.classList.contains('stat-item')) {
                            animateNumbers(entry.target);
                        }
                        
                        // Animation pour les cartes de services
                        if (entry.target.classList.contains('service-card')) {
                            entry.target.style.animationDelay = '0.2s';
                        }
                        
                        // Animation pour les cartes d'actualités
                        if (entry.target.classList.contains('news-card')) {
                            entry.target.style.animationDelay = '0.1s';
                        }
                    }
                });
            }, observerOptions);
            
            // Observer les éléments à animer
            const elementsToAnimate = document.querySelectorAll('.stat-item, .service-card, .news-card, .feature-item, .club-section, .contact-section');
            elementsToAnimate.forEach(el => {
                observer.observe(el);
            });
            
            // Animation des nombres dans les statistiques
            function animateNumbers(element) {
                const numberElement = element.querySelector('h3');
                if (numberElement) {
                    const finalNumber = parseInt(numberElement.textContent);
                    const suffix = numberElement.textContent.replace(/[0-9]/g, '');
                    let currentNumber = 0;
                    const increment = finalNumber / 50;
                    
                    const timer = setInterval(() => {
                        currentNumber += increment;
                        if (currentNumber >= finalNumber) {
                            currentNumber = finalNumber;
                            clearInterval(timer);
                        }
                        numberElement.textContent = Math.floor(currentNumber) + suffix;
                    }, 30);
                }
            }
            
            // Effet de parallax pour la section héro
            const hero = document.querySelector('.hero');
            if (hero) {
                window.addEventListener('scroll', () => {
                    const scrolled = window.pageYOffset;
                    const rate = scrolled * -0.5;
                    hero.style.transform = `translateY(${rate}px)`;
                });
            }
            
            // Animation de la navbar au scroll
            const navbar = document.querySelector('.navbar');
            if (navbar) {
                let lastScrollTop = 0;
                
                window.addEventListener('scroll', () => {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    
                    if (scrollTop > 100) {
                        navbar.style.background = 'rgba(30, 58, 138, 0.95)';
                        navbar.style.backdropFilter = 'blur(20px)';
                    } else {
                        navbar.style.background = 'var(--gradient-primary)';
                        navbar.style.backdropFilter = 'blur(20px)';
                    }
                    
                    // Animation de la navbar (hide/show)
                    if (scrollTop > lastScrollTop && scrollTop > 200) {
                        navbar.style.transform = 'translateY(-100%)';
                    } else {
                        navbar.style.transform = 'translateY(0)';
                    }
                    
                    lastScrollTop = scrollTop;
                });
            }
            
            // Effet de hover amélioré pour les boutons
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px) scale(1.02)';
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
            
            // Animation des cartes au hover
            const cards = document.querySelectorAll('.card, .service-card, .news-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) rotateX(5deg)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) rotateX(0deg)';
                });
            });
            
            // Effet de ripple pour les boutons
            function createRipple(event) {
                const button = event.currentTarget;
                const ripple = document.createElement('span');
                const rect = button.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = event.clientX - rect.left - size / 2;
                const y = event.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                
                button.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            }
            
            buttons.forEach(button => {
                button.addEventListener('click', createRipple);
            });
            
            // Animation des icônes
            const icons = document.querySelectorAll('.fas, .fab');
            icons.forEach(icon => {
                icon.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.2) rotate(10deg)';
                });
                
                icon.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1) rotate(0deg)';
                });
            });
            
            // Effet de typing pour le titre principal
            const heroTitle = document.querySelector('.hero-content h1');
            if (heroTitle && heroTitle.textContent.trim()) {
                const text = heroTitle.textContent;
                heroTitle.textContent = '';
                heroTitle.style.borderRight = '2px solid var(--accent-color)';
                
                let i = 0;
                const typeWriter = () => {
                    if (i < text.length) {
                        heroTitle.textContent += text.charAt(i);
                        i++;
                        setTimeout(typeWriter, 100);
                    } else {
                        heroTitle.style.borderRight = 'none';
                    }
                };
                
                setTimeout(typeWriter, 1000);
            }
            
            // Animation des réseaux sociaux
            const socialLinks = document.querySelectorAll('.social-link, .social-link-footer');
            socialLinks.forEach((link, index) => {
                link.style.animationDelay = `${index * 0.1}s`;
                link.classList.add('fade-in');
            });
            
            // Effet de scroll smooth pour les ancres
            const anchorLinks = document.querySelectorAll('a[href^="#"]');
            anchorLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Animation des formulaires
            const formInputs = document.querySelectorAll('.form-control');
            formInputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.parentElement.classList.add('focused');
                });
                
                input.addEventListener('blur', function() {
                    if (!this.value) {
                        this.parentElement.classList.remove('focused');
                    }
                });
            });
            
            // Effet de loading pour les actions
            const loadingButtons = document.querySelectorAll('.btn[data-loading]');
            loadingButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.add('loading');
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.classList.remove('loading');
                        this.disabled = false;
                    }, 2000);
                });
            });
            
            // Animation des tableaux
            const tableRows = document.querySelectorAll('.table tbody tr');
            tableRows.forEach((row, index) => {
                row.style.animationDelay = `${index * 0.1}s`;
                row.classList.add('fade-in');
            });
            
            // Effet de glitch pour le titre (optionnel)
            const glitchTitle = document.querySelector('.hero-content h1');
            if (glitchTitle) {
                setInterval(() => {
                    if (Math.random() > 0.95) {
                        glitchTitle.style.textShadow = '2px 0 red, -2px 0 blue';
                        setTimeout(() => {
                            glitchTitle.style.textShadow = '2px 2px 4px rgba(0, 0, 0, 0.3)';
                        }, 100);
                    }
                }, 1000);
            }
        });
        
        // Styles CSS pour les effets supplémentaires
        const additionalStyles = `
            <style>
                .ripple {
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.3);
                    transform: scale(0);
                    animation: ripple-animation 0.6s linear;
                    pointer-events: none;
                }
                
                @keyframes ripple-animation {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
                
                .particle {
                    animation: particle-float 3s ease-in-out infinite;
                }
                
                @keyframes particle-float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
                    50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
                }
                
                .focused .form-label {
                    color: var(--accent-color);
                    transform: translateY(-5px);
                }
                
                .btn.loading {
                    pointer-events: none;
                }
                
                .btn.loading::after {
                    content: '';
                    position: absolute;
                    width: 20px;
                    height: 20px;
                    border: 2px solid transparent;
                    border-top: 2px solid currentColor;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;
                }
                
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                
                .navbar {
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .hero {
                    transition: transform 0.1s ease-out;
                }
                
                .card, .service-card, .news-card {
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .fas, .fab {
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .form-control {
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .form-label {
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
            </style>
        `;
        
        // Ajouter les styles au head
        document.head.insertAdjacentHTML('beforeend', additionalStyles);
    </script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        // Enregistrement du Service Worker pour la PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/js/sw.js')
                    .then((registration) => {
                        console.log('Service Worker enregistré avec succès:', registration.scope);
                        
                        // Vérifier les mises à jour
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Nouvelle version disponible
                                    if (confirm('Une nouvelle version de l\'application est disponible. Voulez-vous la charger ?')) {
                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.log('Échec de l\'enregistrement du Service Worker:', error);
                    });
            });
        }
        
        // Gestion de l'installation PWA
        let deferredPrompt;
        let installButton = null;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('beforeinstallprompt event fired');
            // Empêcher l'affichage automatique du prompt
            e.preventDefault();
            deferredPrompt = e;
            
            // Afficher un bouton d'installation personnalisé
            showInstallButton();
        });
        
        function showInstallButton() {
            // Vérifier si le bouton existe déjà
            if (installButton) {
                return;
            }
            
            // Vérifier si l'app est déjà installée
            if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
                console.log('App already installed');
                return;
            }
            
            // Créer un bouton d'installation
            installButton = document.createElement('button');
            installButton.innerHTML = '<i class="fas fa-download me-2"></i>Installer l\'app';
            installButton.className = 'btn btn-success btn-sm position-fixed';
            installButton.style.cssText = `
                bottom: 20px; 
                right: 20px; 
                z-index: 1000; 
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                border-radius: 25px;
                padding: 10px 20px;
                font-weight: 600;
                animation: pulse 2s infinite;
            `;
            installButton.onclick = installApp;
            
            // Ajouter des styles d'animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(installButton);
            
            // Masquer le bouton après 15 secondes
            setTimeout(() => {
                if (installButton && installButton.parentNode) {
                    installButton.remove();
                    installButton = null;
                }
            }, 15000);
        }
        
        function installApp() {
            if (deferredPrompt) {
                console.log('Showing install prompt');
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    console.log('User choice:', choiceResult.outcome);
                    if (choiceResult.outcome === 'accepted') {
                        console.log('Utilisateur a accepté l\'installation PWA');
                        // Masquer le bouton après installation
                        if (installButton) {
                            installButton.remove();
                            installButton = null;
                        }
                    } else {
                        console.log('Utilisateur a refusé l\'installation PWA');
                    }
                    deferredPrompt = null;
                });
            } else {
                console.log('No deferred prompt available');
                // Fallback pour les navigateurs qui ne supportent pas beforeinstallprompt
                alert('Pour installer cette application, utilisez le menu de votre navigateur (⋮) et sélectionnez "Ajouter à l\'écran d\'accueil" ou "Installer l\'application".');
            }
        }
        
        // Détecter si l'app est installée
        window.addEventListener('appinstalled', (evt) => {
            console.log('PWA installée avec succès');
            // Masquer le bouton d'installation
            if (installButton) {
                installButton.remove();
                installButton = null;
            }
        });
        
        // Gestion du mode standalone (app installée)
        if (window.matchMedia('(display-mode: standalone)').matches) {
            console.log('Application en mode standalone');
            document.body.classList.add('pwa-standalone');
        }
        
        // Vérification périodique de l'éligibilité à l'installation
        function checkInstallability() {
            // Vérifier si l'app peut être installée
            if ('serviceWorker' in navigator && 'PushManager' in window) {
                console.log('App is installable');
                
                // Vérifier si l'événement beforeinstallprompt n'a pas encore été déclenché
                if (!deferredPrompt && !installButton) {
                    // Attendre un peu puis afficher le bouton si possible
                    setTimeout(() => {
                        if (!deferredPrompt && !installButton) {
                            showInstallButton();
                        }
                    }, 3000);
                }
            } else {
                console.log('App is not installable - missing features');
            }
        }
        
        // Vérifier l'installabilité au chargement et périodiquement
        window.addEventListener('load', checkInstallability);
        setInterval(checkInstallability, 10000); // Vérifier toutes les 10 secondes
        
        // Gestion des erreurs de service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.addEventListener('error', (event) => {
                console.error('Service Worker error:', event);
            });
        }
    </script>
</body>
</html>